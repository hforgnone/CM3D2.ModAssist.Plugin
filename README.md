# CM3D2.ModAssist.Plugin
装備されている衣装をベースに、各種パラメーターを調整し、Modとして出力するプラグインです。  
まだ実験段階です。  

## 導入方法
#### 前提条件  
UnityInjectorないししばりすが導入済みであること。

#### インストール  
Download ZIPボタンを押してzipファイルをダウンロードします。  
zipファイルの中にあるUnityInjector\CM3D2.ModAssist.Plugin.dllを、プラグインフォルダにコピーしてください。

#### 自分でコンパイルする場合  
VisualStudio Community 2015/Visual Studio Tools for Unity環境で作成しています。  

## 使用方法
#### メニュー操作
GearMenuを利用しています。右上メニュー内のMAボタンでメニューが開閉します。  

![GUI](http://i.imgur.com/dVzvWaS.jpg  "GUI")

パーツを選択すると、編集ウィンドウが開きます。  
こちらで各種項目を編集・出力することができます。

#### 画面説明
###### 基本情報
* ベース  
  現在のスロットおよび割り当てられているメニューファイルを表示します。  
  
* 出力先  
  エクスポート時の各種ファイル出力先フォルダを指定します。  

* 出力オプション  
  - 上書きする  
    ONで、出力先に同名ファイルが存在した場合、上書きします
  - 同名を許可する  
    ONで、既に同一名称のアイテムが存在した場合でも出力します。  
	※同名が存在すると、利用しているツールによりますが優先順位に従って読み込まれるため、追加されない、元が（見かけ上）消えてしまった、といったことが起こる可能性があります。

* ファイル名の指定  
  - 直接指定する  
    入力されたファイル名（＋拡張子）で出力します。
	+ ファイル名  
	  保存時のメニューファイルの指定します。  
	  また、変更後、適用ボタンをクリックすると、メニューファイルが存在すれば読み込みます。  
	  ※しばりす等が読み込み可能なフォルダ以下またはarc内に存在する必要があります。
  - プリフィクスを使用
    指定されたプリフィクスに基いて自動的にファイル名を設定します。  
	+ メニュー：{prefix}_i_.menu
	+ アイコン：{prefix}_i_.tex
    + マテリアル：{prefix}_{連番}.mate
    + テクスチャ：{prefix}_{propertyName}_{連番}.tex (propertyName:_MainTex等)
    + モデル：{prefix}_{連番}.model
    + pmat：{prefix}_{連番}.pmat

* 名前  
  表示される名前を設定します。

* 説明  
  表示される説明を設定します。

* 表示順  
  アイテム選択時の表示位置を設定します。

* アイコン  
  アイコンファイルを指定します。

* カテゴリ  
  カテゴリを指定します。

* テクスチャ変更  
  変更できるだけで、保存等はできません。インターフェースも適当です。  
  texはMod以下ないしSybaris/deflac等で読み込めるフォルダ内に存在する必要があります。  
  arc内のもファイル名を直接入力して[適]ボタンで適用できます。  
  pngはファイル選択ダイアログで選択できる範囲ならどこでもいけるはず。  

###### マテリアル
＜作成中＞

###### モデル
＜作成中＞

###### アイテム削除
メニュー適用時、削除したいアイテムスロットを選択します。  
_I_{slotname}_del.menuが該当スロットに適用されることになります。

###### ノード
メニュー適用時、表示・非表示したいノード（身体の部位）を指定します。  
※だいたいの部位を示す名称を表示していますが、適当なので間違っているかも。

###### マスク
メニュー適用時、マスクしたいアイテムスロットを指定します。  

#### 今後やりたいこと  
- 衣装以外（髪、肌）にも適用
- TextureModifierを使えるように
- png読み込みの実装
- リソース参照のmenuも編集
- モデルの追加・削除と、それに合わせてマテリアルも追加・削除
- その他、思いついたら

#### 権利とか？
GearMenu.cs, TextureModifier.cs以外の、私が編集しているソースの改変・再配布等は自由にしていただいてかまいません。  
むしろやりたいこと・それを超える機能を実装してくれる人歓迎。

## 謝辞
ソースを利用させていただいているGearMenu, FileBrowser, TextureModifierを始め、
利用するのに必要なReiPatcher, UnityInjector, しばりすを始め、各種Modを提供していただいている方々、なによりこんなに遊べるCM3D2を提供してくれたメーカーに感謝です。

##更新履歴
####0.0.0.12
* 初版（実験版）
